# –ù–∞—Å—Ç—Ä–æ–π–∫–∞ PM2 –¥–ª—è Windows

## –ü—Ä–æ–±–ª–µ–º–∞

–ö–æ–º–∞–Ω–¥–∞ `pm2 startup` **–ù–ï —Ä–∞–±–æ—Ç–∞–µ—Ç** –Ω–∞ Windows, —Ç–∞–∫ –∫–∞–∫ –æ–Ω–∞ –ø—Ä–µ–¥–Ω–∞–∑–Ω–∞—á–µ–Ω–∞ –¥–ª—è Linux/Mac —Å–∏—Å—Ç–µ–º (systemd, launchd).

–ü—Ä–∏ –ø–æ–ø—ã—Ç–∫–µ –≤—ã–ø–æ–ª–Ω–∏—Ç—å `pm2 startup` –Ω–∞ Windows –≤—ã –ø–æ–ª—É—á–∏—Ç–µ –æ—à–∏–±–∫—É:
```
[PM2][ERROR] Init system not found
Error: Init system not found
```

---

## –†–µ—à–µ–Ω–∏—è –¥–ª—è Windows

### –í–∞—Ä–∏–∞–Ω—Ç 1: pm2-windows-startup ‚úÖ –†–µ–∫–æ–º–µ–Ω–¥—É–µ—Ç—Å—è

–°–ø–µ—Ü–∏–∞–ª—å–Ω—ã–π –ø–∞–∫–µ—Ç –¥–ª—è –∞–≤—Ç–æ–∑–∞–ø—É—Å–∫–∞ PM2 –Ω–∞ Windows.

#### –£—Å—Ç–∞–Ω–æ–≤–∫–∞:

```cmd
# 1. –£—Å—Ç–∞–Ω–æ–≤–∏—Ç–µ PM2 (–µ—Å–ª–∏ –µ—â–µ –Ω–µ —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω)
npm install -g pm2

# 2. –£—Å—Ç–∞–Ω–æ–≤–∏—Ç–µ pm2-windows-startup
npm install -g pm2-windows-startup

# 3. –ù–∞—Å—Ç—Ä–æ–π—Ç–µ –∞–≤—Ç–æ–∑–∞–ø—É—Å–∫
pm2-windows-startup install
```

#### –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ:

```cmd
# –ó–∞–ø—É—Å—Ç–∏—Ç–µ –≤–∞—à —Å–µ—Ä–≤–∏—Å
pm2 start server.js --name stock-sync

# –°–æ—Ö—Ä–∞–Ω–∏—Ç–µ –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—é
pm2 save

# –ü—Ä–æ–≤–µ—Ä—å—Ç–µ —Å—Ç–∞—Ç—É—Å
pm2 list
```

#### –ü—Ä–æ–≤–µ—Ä–∫–∞ –∞–≤—Ç–æ–∑–∞–ø—É—Å–∫–∞:

1. –ü–µ—Ä–µ–∑–∞–≥—Ä—É–∑–∏—Ç–µ –∫–æ–º–ø—å—é—Ç–µ—Ä
2. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ —á—Ç–æ —Å–µ—Ä–≤–∏—Å –∑–∞–ø—É—â–µ–Ω:
```cmd
pm2 list
```

#### –£–¥–∞–ª–µ–Ω–∏–µ –∞–≤—Ç–æ–∑–∞–ø—É—Å–∫–∞:

```cmd
pm2 stop stock-sync
pm2 delete stock-sync
pm2 save
pm2-windows-startup uninstall
```

---

### –í–∞—Ä–∏–∞–Ω—Ç 2: node-windows (Windows Service) ‚úÖ –†–µ–∫–æ–º–µ–Ω–¥—É–µ—Ç—Å—è

–°–æ–∑–¥–∞–µ—Ç –ø–æ–ª–Ω–æ—Ü–µ–Ω–Ω—É—é Windows Service. –£–∂–µ –Ω–∞—Å—Ç—Ä–æ–µ–Ω–æ –≤ –ø—Ä–æ–µ–∫—Ç–µ!

#### –£—Å—Ç–∞–Ω–æ–≤–∫–∞:

```cmd
# 1. –£—Å—Ç–∞–Ω–æ–≤–∏—Ç–µ node-windows –≥–ª–æ–±–∞–ª—å–Ω–æ
npm install -g node-windows

# 2. –û—Ç–∫—Ä–æ–π—Ç–µ CMD –∏–ª–∏ PowerShell –û–¢ –ò–ú–ï–ù–ò –ê–î–ú–ò–ù–ò–°–¢–†–ê–¢–û–†–ê!

# 3. –ü–µ—Ä–µ–π–¥–∏—Ç–µ –≤ –ø–∞–ø–∫—É –ø—Ä–æ–µ–∫—Ç–∞
cd C:\path\to\StockSyncLamp

# 4. –ó–∞–ø—É—Å—Ç–∏—Ç–µ —É—Å—Ç–∞–Ω–æ–≤–∫—É
npm run install:service
```

#### –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ —Å–ª—É–∂–±–æ–π:

**–ß–µ—Ä–µ–∑ services.msc:**
1. –ù–∞–∂–º–∏—Ç–µ Win+R
2. –í–≤–µ–¥–∏—Ç–µ `services.msc`
3. –ù–∞–π–¥–∏—Ç–µ —Å–ª—É–∂–±—É "StockSyncService"
4. –£–ø—Ä–∞–≤–ª—è–π—Ç–µ: –ó–∞–ø—É—Å–∫, –û—Å—Ç–∞–Ω–æ–≤–∫–∞, –°–≤–æ–π—Å—Ç–≤–∞

**–ß–µ—Ä–µ–∑ –∫–æ–º–∞–Ω–¥–Ω—É—é —Å—Ç—Ä–æ–∫—É:**
```cmd
# –ó–∞–ø—É—Å—Ç–∏—Ç—å
net start StockSyncService

# –û—Å—Ç–∞–Ω–æ–≤–∏—Ç—å
net stop StockSyncService

# –°—Ç–∞—Ç—É—Å
sc query StockSyncService
```

#### –õ–æ–≥–∏:

–õ–æ–≥–∏ —Å–ª—É–∂–±—ã –Ω–∞—Ö–æ–¥—è—Ç—Å—è –≤ –ø–∞–ø–∫–µ `daemon/` (—Å–æ–∑–¥–∞–µ—Ç—Å—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏).

#### –£–¥–∞–ª–µ–Ω–∏–µ —Å–ª—É–∂–±—ã:

```cmd
# –û—Ç –∏–º–µ–Ω–∏ –∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä–∞
npm run uninstall:service
```

---

### –í–∞—Ä–∏–∞–Ω—Ç 3: Task Scheduler (–ü–ª–∞–Ω–∏—Ä–æ–≤—â–∏–∫ –∑–∞–¥–∞–Ω–∏–π)

–í—Å—Ç—Ä–æ–µ–Ω–Ω—ã–π –∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç Windows –¥–ª—è –∞–≤—Ç–æ–∑–∞–ø—É—Å–∫–∞ –ø—Ä–æ–≥—Ä–∞–º–º.

#### –ù–∞—Å—Ç—Ä–æ–π–∫–∞:

1. **–û—Ç–∫—Ä–æ–π—Ç–µ Task Scheduler:**
   - –ù–∞–∂–º–∏—Ç–µ Win+R
   - –í–≤–µ–¥–∏—Ç–µ `taskschd.msc`
   - –ù–∞–∂–º–∏—Ç–µ Enter

2. **–°–æ–∑–¥–∞–π—Ç–µ –∑–∞–¥–∞—á—É:**
   - –î–µ–π—Å—Ç–≤–∏—è ‚Üí –°–æ–∑–¥–∞—Ç—å –∑–∞–¥–∞—á—É...
   - –í–∫–ª–∞–¥–∫–∞ "–û–±—â–∏–µ":
     * –ò–º—è: "Stock Sync Service"
     * ‚òë –í—ã–ø–æ–ª–Ω—è—Ç—å –¥–ª—è –≤—Å–µ—Ö –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π
     * ‚òë –í—ã–ø–æ–ª–Ω—è—Ç—å —Å –Ω–∞–∏–≤—ã—Å—à–∏–º–∏ –ø—Ä–∞–≤–∞–º–∏

3. **–ù–∞—Å—Ç—Ä–æ–π—Ç–µ —Ç—Ä–∏–≥–≥–µ—Ä:**
   - –í–∫–ª–∞–¥–∫–∞ "–¢—Ä–∏–≥–≥–µ—Ä—ã" ‚Üí –°–æ–∑–¥–∞—Ç—å...
   - –ù–∞—á–∞—Ç—å –∑–∞–¥–∞—á—É: –ü—Ä–∏ –≤—Ö–æ–¥–µ –≤ —Å–∏—Å—Ç–µ–º—É
   - OK

4. **–ù–∞—Å—Ç—Ä–æ–π—Ç–µ –¥–µ–π—Å—Ç–≤–∏–µ:**
   - –í–∫–ª–∞–¥–∫–∞ "–î–µ–π—Å—Ç–≤–∏—è" ‚Üí –°–æ–∑–¥–∞—Ç—å...
   - –î–µ–π—Å—Ç–≤–∏–µ: –ó–∞–ø—É—Å—Ç–∏—Ç—å –ø—Ä–æ–≥—Ä–∞–º–º—É
   - –ü—Ä–æ–≥—Ä–∞–º–º–∞: `node`
   - –ê—Ä–≥—É–º–µ–Ω—Ç—ã: `server.js`
   - –†–∞–±–æ—á–∞—è –ø–∞–ø–∫–∞: `C:\path\to\StockSyncLamp`
   - OK

5. **–ù–∞—Å—Ç—Ä–æ–π—Ç–µ –ø–∞—Ä–∞–º–µ—Ç—Ä—ã:**
   - –í–∫–ª–∞–¥–∫–∞ "–ü–∞—Ä–∞–º–µ—Ç—Ä—ã":
     * ‚òë –†–∞–∑—Ä–µ—à–∏—Ç—å –∑–∞–ø—É—Å–∫ –∑–∞–¥–∞—á–∏ –ø–æ —Ç—Ä–µ–±–æ–≤–∞–Ω–∏—é
     * ‚òë –ï—Å–ª–∏ –∑–∞–¥–∞—á–∞ –Ω–µ –≤—ã–ø–æ–ª–Ω–µ–Ω–∞, –ø–µ—Ä–µ–∑–∞–ø—É—Å–∫–∞—Ç—å –∫–∞–∂–¥—ã–µ: 1 –º–∏–Ω—É—Ç—É
     * –û—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞—Ç—å –∑–∞–¥–∞—á—É, –µ—Å–ª–∏ –æ–Ω–∞ –≤—ã–ø–æ–ª–Ω—è–µ—Ç—Å—è –±–æ–ª–µ–µ: –°–Ω—è—Ç—å –≥–∞–ª–æ—á–∫—É
   - OK

#### –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ:

–ù–∞–π–¥–∏—Ç–µ –∑–∞–¥–∞—á—É "Stock Sync Service" –≤ Task Scheduler:
- –ü–ö–ú ‚Üí –í—ã–ø–æ–ª–Ω–∏—Ç—å (–ó–∞–ø—É—Å—Ç–∏—Ç—å)
- –ü–ö–ú ‚Üí –û—Ç–∫–ª—é—á–∏—Ç—å (–û—Å—Ç–∞–Ω–æ–≤–∏—Ç—å)
- –ü–ö–ú ‚Üí –£–¥–∞–ª–∏—Ç—å

---

### –í–∞—Ä–∏–∞–Ω—Ç 4: PM2 –±–µ–∑ –∞–≤—Ç–æ–∑–∞–ø—É—Å–∫–∞

–ü—Ä–æ—Å—Ç–æ–π –≤–∞—Ä–∏–∞–Ω—Ç - –∑–∞–ø—É—Å–∫–∞–π—Ç–µ PM2 –≤—Ä—É—á–Ω—É—é –ø–æ—Å–ª–µ –ø–µ—Ä–µ–∑–∞–≥—Ä—É–∑–∫–∏.

#### –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ:

```cmd
# –ó–∞–ø—É—Å—Ç–∏—Ç–µ —Å–µ—Ä–≤–∏—Å
pm2 start server.js --name stock-sync

# –°–æ—Ö—Ä–∞–Ω–∏—Ç–µ –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—é
pm2 save

# –ü—Ä–∏ –ø–µ—Ä–µ–∑–∞–≥—Ä—É–∑–∫–µ –∫–æ–º–ø—å—é—Ç–µ—Ä–∞:
pm2 resurrect
```

#### –°–æ–∑–¥–∞–π—Ç–µ bat-—Ñ–∞–π–ª –¥–ª—è –±—ã—Å—Ç—Ä–æ–≥–æ –∑–∞–ø—É—Å–∫–∞:

–°–æ–∑–¥–∞–π—Ç–µ —Ñ–∞–π–ª `start-stock-sync.bat`:
```batch
@echo off
cd /d "%~dp0"
pm2 resurrect
pm2 list
pause
```

–ü–æ–º–µ—Å—Ç–∏—Ç–µ —è—Ä–ª—ã–∫ –Ω–∞ —ç—Ç–æ—Ç —Ñ–∞–π–ª –≤ –ø–∞–ø–∫—É –∞–≤—Ç–æ–∑–∞–≥—Ä—É–∑–∫–∏:
- Win+R ‚Üí `shell:startup`
- –°–æ–∑–¥–∞–π—Ç–µ —è—Ä–ª—ã–∫ –Ω–∞ `start-stock-sync.bat`

---

## –°—Ä–∞–≤–Ω–µ–Ω–∏–µ –º–µ—Ç–æ–¥–æ–≤

| –ú–µ—Ç–æ–¥ | –°–ª–æ–∂–Ω–æ—Å—Ç—å | –ê–≤—Ç–æ–∑–∞–ø—É—Å–∫ | –õ–æ–≥–∏ | –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ | –†–µ–∫–æ–º–µ–Ω–¥—É–µ—Ç—Å—è |
|-------|-----------|------------|------|------------|---------------|
| **pm2-windows-startup** | ‚≠ê‚≠ê –õ–µ–≥–∫–æ | ‚úÖ –î–∞ | ‚úÖ PM2 | PM2 CLI | ‚úÖ –î–∞ |
| **node-windows** | ‚≠ê‚≠ê‚≠ê –°—Ä–µ–¥–Ω–µ | ‚úÖ –î–∞ | ‚úÖ –§–∞–π–ª | Services.msc | ‚úÖ –î–∞ |
| **Task Scheduler** | ‚≠ê‚≠ê‚≠ê‚≠ê –°–ª–æ–∂–Ω–æ | ‚úÖ –î–∞ | ‚ùå –ù–µ—Ç | Task Scheduler | ‚ö†Ô∏è –î–ª—è –æ–ø—ã—Ç–Ω—ã—Ö |
| **PM2 –≤—Ä—É—á–Ω—É—é** | ‚≠ê –û—á–µ–Ω—å –ª–µ–≥–∫–æ | ‚ùå –ù–µ—Ç | ‚úÖ PM2 | PM2 CLI | ‚ö†Ô∏è –î–ª—è —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∏ |

---

## –†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–∏

### –î–ª—è —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∏:
```cmd
npm run dev
```
–ò–ª–∏:
```cmd
pm2 start server.js --name stock-sync --watch
pm2 logs stock-sync
```

### –î–ª—è production –Ω–∞ Windows:

**–õ—É—á—à–∏–π –≤–∞—Ä–∏–∞–Ω—Ç:**
```cmd
npm run install:service
```
–ü—Ä–µ–∏–º—É—â–µ—Å—Ç–≤–∞:
- –ü–æ–ª–Ω–æ—Ü–µ–Ω–Ω–∞—è Windows Service
- –ê–≤—Ç–æ–∑–∞–ø—É—Å–∫ –ø—Ä–∏ —Å—Ç–∞—Ä—Ç–µ —Å–∏—Å—Ç–µ–º—ã
- –†–∞–±–æ—Ç–∞–µ—Ç –≤ —Ñ–æ–Ω–µ
- –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ —á–µ—Ä–µ–∑ services.msc
- –ù–∞–¥–µ–∂–Ω–æ

**–ê–ª—å—Ç–µ—Ä–Ω–∞—Ç–∏–≤–∞ (–µ—Å–ª–∏ node-windows –Ω–µ –ø–æ–¥—Ö–æ–¥–∏—Ç):**
```cmd
npm install -g pm2-windows-startup
pm2-windows-startup install
pm2 start server.js --name stock-sync
pm2 save
```

---

## –£—Å—Ç—Ä–∞–Ω–µ–Ω–∏–µ –ø—Ä–æ–±–ª–µ–º

### PM2 –Ω–µ –∑–∞–ø—É—Å–∫–∞–µ—Ç—Å—è –ø–æ—Å–ª–µ –ø–µ—Ä–µ–∑–∞–≥—Ä—É–∑–∫–∏

**–ï—Å–ª–∏ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è pm2-windows-startup:**
```cmd
# –ü–µ—Ä–µ—É—Å—Ç–∞–Ω–æ–≤–∏—Ç–µ
pm2-windows-startup uninstall
pm2-windows-startup install
pm2 save
```

**–ï—Å–ª–∏ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è node-windows:**
```cmd
# –ü—Ä–æ–≤–µ—Ä—å—Ç–µ —Å—Ç–∞—Ç—É—Å —Å–ª—É–∂–±—ã
sc query StockSyncService

# –ü–µ—Ä–µ—É—Å—Ç–∞–Ω–æ–≤–∏—Ç–µ
npm run uninstall:service
npm run install:service
```

### –û—à–∏–±–∫–∞ "Access denied" –ø—Ä–∏ —É—Å—Ç–∞–Ω–æ–≤–∫–µ —Å–ª—É–∂–±—ã

- –û—Ç–∫—Ä–æ–π—Ç–µ CMD/PowerShell **–æ—Ç –∏–º–µ–Ω–∏ –∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä–∞**
- –ü–ö–ú –Ω–∞ PowerShell ‚Üí "–ó–∞–ø—É—Å—Ç–∏—Ç—å –æ—Ç –∏–º–µ–Ω–∏ –∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä–∞"

### PM2 –Ω–µ —Å–æ—Ö—Ä–∞–Ω—è–µ—Ç –ø—Ä–æ—Ü–µ—Å—Å—ã

```cmd
# –£–±–µ–¥–∏—Ç–µ—Å—å —á—Ç–æ –ø—Ä–æ—Ü–µ—Å—Å –∑–∞–ø—É—â–µ–Ω
pm2 list

# –°–æ—Ö—Ä–∞–Ω–∏—Ç–µ
pm2 save

# –ü—Ä–æ–≤–µ—Ä—å—Ç–µ —Å–æ—Ö—Ä–∞–Ω–µ–Ω–Ω—É—é –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—é
pm2 show stock-sync
```

---

## –ü—Ä–æ–≤–µ—Ä–∫–∞ –∞–≤—Ç–æ–∑–∞–ø—É—Å–∫–∞

1. –ü–µ—Ä–µ–∑–∞–≥—Ä—É–∑–∏—Ç–µ –∫–æ–º–ø—å—é—Ç–µ—Ä
2. **–î–ª—è pm2-windows-startup:**
   ```cmd
   pm2 list
   ```
3. **–î–ª—è node-windows:**
   ```cmd
   sc query StockSyncService
   ```
   –ò–ª–∏ –æ—Ç–∫—Ä–æ–π—Ç–µ services.msc –∏ –Ω–∞–π–¥–∏—Ç–µ StockSyncService

4. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ —Ä–∞–±–æ—Ç—É —Å–µ—Ä–≤–∏—Å–∞:
   ```cmd
   curl http://localhost:3000/health
   ```

---

## –ü–æ–ª–µ–∑–Ω—ã–µ –∫–æ–º–∞–Ω–¥—ã PM2

```cmd
# –°–ø–∏—Å–æ–∫ –ø—Ä–æ—Ü–µ—Å—Å–æ–≤
pm2 list

# –õ–æ–≥–∏
pm2 logs stock-sync

# –ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥
pm2 monit

# –ü–µ—Ä–µ–∑–∞–ø—É—Å–∫
pm2 restart stock-sync

# –û—Å—Ç–∞–Ω–æ–≤–∫–∞
pm2 stop stock-sync

# –£–¥–∞–ª–µ–Ω–∏–µ
pm2 delete stock-sync

# –ò–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è
pm2 show stock-sync

# –û—á–∏—Å—Ç–∫–∞ –≤—Å–µ—Ö –ø—Ä–æ—Ü–µ—Å—Å–æ–≤
pm2 delete all
```

---

## –ò—Ç–æ–≥

‚ùå **–ù–ï –∏—Å–ø–æ–ª—å–∑—É–π—Ç–µ:** `pm2 startup` (–Ω–µ —Ä–∞–±–æ—Ç–∞–µ—Ç –Ω–∞ Windows)

‚úÖ **–ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ:**
- `npm run install:service` (—Ä–µ–∫–æ–º–µ–Ω–¥—É–µ—Ç—Å—è)
- –ò–ª–∏ `pm2-windows-startup install`

–ì–æ—Ç–æ–≤–æ! –í–∞—à —Å–µ—Ä–≤–∏—Å –±—É–¥–µ—Ç –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –∑–∞–ø—É—Å–∫–∞—Ç—å—Å—è –ø—Ä–∏ —Å—Ç–∞—Ä—Ç–µ Windows! üöÄ

